(function(e){function t(t){for(var a,o,i=t[0],c=t[1],u=t[2],p=0,d=[];p<i.length;p++)o=i[p],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&d.push(r[o][0]),r[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);l&&l(t);while(d.length)d.shift()();return s.push.apply(s,u||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],a=!0,i=1;i<n.length;i++){var c=n[i];0!==r[c]&&(a=!1)}a&&(s.splice(t--,1),e=o(o.s=n[0]))}return e}var a={},r={app:0},s=[];function o(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=a,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(n,a,function(t){return e[t]}.bind(null,a));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/Phantom/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var l=c;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"37c8":function(e,t,n){"use strict";var a=n("b7b6"),r=n.n(a);r.a},"392a":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);var a=n("a026"),r=n("8c4f"),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("main",[n("phantom-controls"),n("phantom-comic")],1)},o=[],i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.error?n("h2",[e._v("Image failed to load.")]):n("img",{attrs:{src:e.src}}),n("link",{attrs:{rel:"preload",as:"image",href:e.prev,crossorigin:"anonymous"}}),n("link",{attrs:{rel:"preload",as:"image",href:e.next,crossorigin:"anonymous"}})])},c=[],u=n("f7f1"),l=n("b166"),p=n("856d");function d(e){return function(){const t=Object(u["a"])(this.$store.state.displayDate,e),n=Object(l["a"])(t,"yyyy"),a=Object(l["a"])(t,"MM"),r=Object(l["a"])(t,"dd"),s=Object(p["a"])(t)?"_hs":"",o=`ThePhantom/${n}/${a}/Phantom${s}.${n}${a}${r}_1536.gif`;return`https://safr.kingfeatures.com/api/img.php?s=c&file=${btoa(o)}`}}const m="/spinner.gif";var h={name:"PhantomComic",data:()=>({error:!1,src:m}),computed:{prev:d(-1),url:d(0),next:d(1)},watch:{url:{immediate:!0,handler(e){this.error&&(this.error=!1),this.src=m;const t=new Image;t.src=e;const n=()=>{this.src=e,t.removeEventListener("error",a)},a=()=>{this.error=!0,t.removeEventListener("load",n)};t.addEventListener("load",n,{once:!0}),t.addEventListener("error",a,{once:!0})}}}},f=h,v=(n("68b0"),n("2877")),y=Object(v["a"])(f,i,c,!1,null,"c581e4d6",null),b=y.exports,g=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("h1",[n("span",{staticClass:"small button",on:{click:e.prevWeek}},[e._v("◄")]),n("span",{staticClass:"button",on:{click:e.prev}},[e._v("◄")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.year,expression:"year"}],staticClass:"wide",attrs:{type:"number",max:e.maxYear,step:"1"},domProps:{value:e.year},on:{input:function(t){t.target.composing||(e.year=t.target.value)}}}),n("span",{staticClass:"sep"},[e._v("–")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.month,expression:"month"}],attrs:{type:"number",min:"0",max:"13",step:"1"},domProps:{value:e.month},on:{input:function(t){t.target.composing||(e.month=t.target.value)}}}),n("span",{staticClass:"sep"},[e._v("–")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.date,expression:"date"}],attrs:{type:"number",min:"0",max:"32",step:"1"},domProps:{value:e.date},on:{input:function(t){t.target.composing||(e.date=t.target.value)}}}),n("span",{staticClass:"button",class:{disabled:e.isToday},on:{click:e.next}},[e._v("►")]),n("span",{staticClass:"small button",class:{disabled:e.isThisWeek},on:{click:e.nextWeek}},[e._v("►")])])},w=[],O=n("7677"),j=n("79d6"),x=n("727c"),_=n("e8d4"),P=n("7070"),k=n("9d0e"),D=n("4e97"),$=n("b522"),S=n("1ba4"),C=n("d148"),E=n("2f62");const L="updateDisplay",N=e=>function(){const{displayDate:t,today:n}=this.$store.state,a=Object(u["a"])(t,e);Object(O["a"])(a,n)&&this.$store.dispatch(L,a)},M=(e,t,n=0)=>({get(...t){return e(this.$store.state.displayDate)+n},set(e,...a){const{displayDate:r,today:s}=this.$store.state,o=t(r,e-n),i=Object(j["a"])([o,s]);this.$store.dispatch(L,i)}});var T={name:"PhantomControls",created(){window.addEventListener("keyup",this.onKeyUp)},destroyed(){window.removeEventListener("keyup",this.onKeyUp)},computed:{year:M(x["a"],_["a"]),month:M(P["a"],k["a"],1),date:M(D["a"],$["a"]),...Object(E["c"])({isToday:e=>Object(S["a"])(e.today,e.displayDate),isThisWeek:e=>!Object(C["a"])(e.today,e.displayDate),maxYear:e=>Object(x["a"])(e.today)})},methods:{prev:N(-1),next:N(1),prevWeek:N(-7),nextWeek:N(7),onKeyUp(e){switch(e.key){case"ArrowLeft":return this.prev();case"ArrowRight":return this.next()}}}},U=T,W=(n("37c8"),Object(v["a"])(U,g,w,!1,null,"ea458f3e",null)),I=W.exports,R={name:"App",components:{PhantomComic:b,PhantomControls:I}},A=R,K=(n("9993"),Object(v["a"])(A,s,o,!1,null,null,null)),q=K.exports;a["a"].use(r["a"]);var J=new r["a"]({routes:[{path:"/",component:q}],parseQuery(e=""){const t=Object.fromEntries(new URLSearchParams(e));return"d"in t&&isNaN(new Date(t.d))&&delete t.d,t},stringifyQuery(e){const t=Object.entries(e);return t.length?"?"+new URLSearchParams(t):""}});a["a"].use(E["b"]);const Q=(e,t)=>{if(!e)return null;const n=new URLSearchParams(e).get(t);if(!n)return null;const a=new Date(n);return isNaN(a)?null:a},Y=(e,t)=>{const n=e.getItem(t);if(!n)return null;const a=new Date(parseInt(n,10));return isNaN(a)?null:a},z=(e,t)=>{let n=+Y(e,t);return a=>a.subscribe(()=>{const r=+a.state.displayDate;r>n&&(e.setItem(t,r),n=r)})};var B=new E["a"]({plugins:[z(localStorage,"lastSeen")],state(){const e=new Date,t={today:e,loading:!1},n=Q(location.search,"d"),a=n=>(t.displayDate=Object(j["a"])([e,n]),t);if(n)return a(n);const r=Y(localStorage,"lastSeen");return a(r?Object(u["a"])(r,1):e)},mutations:{changeDate(e,t){e.displayDate=t}},actions:{updateDisplay({commit:e,state:t},n){e("changeDate",n),Object(S["a"])(n,t.today)?J.push({query:{}}):J.push({query:{d:Object(l["a"])(n,"yyyy-MM-dd")}})}}});t["default"]=window.app=new a["a"]({router:J,store:B}).$mount("router-view")},"68b0":function(e,t,n){"use strict";var a=n("392a"),r=n.n(a);r.a},"7dad":function(e,t,n){},9993:function(e,t,n){"use strict";var a=n("7dad"),r=n.n(a);r.a},b7b6:function(e,t,n){}});
//# sourceMappingURL=app.8dbf46b8.js.map